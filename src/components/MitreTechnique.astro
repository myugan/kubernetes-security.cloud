---
import { getMitreTechnique } from '../data/mitre-attack';

interface Props {
  techniqueId: string;
  showDescription?: boolean;
}

const { techniqueId, showDescription = false } = Astro.props;
const technique = getMitreTechnique(techniqueId);
---

{technique && (
  <div class="inline-flex items-center gap-2">
    <a
      href={technique.url}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded bg-gray-50 text-gray-700 border border-gray-300 hover:bg-gray-100 transition-colors"
      title={`MITRE ATT&CK ${technique.id}: ${technique.name}`}
    >
      <span class="font-mono font-bold">{technique.id}</span>
      <span class="hidden sm:inline">{technique.name}</span>
      <svg class="w-3 h-3 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
      </svg>
    </a>
    {showDescription && (
      <span class="text-xs text-gray-600 hidden md:inline">{technique.description}</span>
    )}
  </div>
)}

{!technique && (
  <span class="inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold rounded bg-gray-100 text-gray-700 border border-gray-200">
    <span class="font-mono">{techniqueId}</span>
    <span class="text-gray-500">(Unknown)</span>
  </span>
)}
